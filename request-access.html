<!DOCTYPE html>
<html lang="en" class="bg-[#FFF5E1] min-h-screen flex items-center justify-center">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Request Admin Access</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#FFF5E1] text-[#3E2723] font-sans">

  <main class="flex flex-col items-center justify-center min-h-screen px-4">

    <!-- Form Container -->
    <div class="max-w-md w-full p-8 bg-white rounded shadow-lg border border-[#800000]">
      <h1 class="text-3xl font-bold mb-6 text-[#800000] text-center">Request Admin Access</h1>

      <form id="requestForm" class="space-y-4" autocomplete="off">
        <div>
          <label for="reqName" class="block mb-1 font-semibold">Name</label>
          <input
            type="text"
            id="reqName"
            name="reqName"
            required
            class="w-full px-3 py-2 border border-[#800000] rounded"
          />
        </div>
        <div>
          <label for="reqEmail" class="block mb-1 font-semibold">Email</label>
          <input
            type="email"
            id="reqEmail"
            name="reqEmail"
            required
            class="w-full px-3 py-2 border border-[#800000] rounded"
          />
        </div>
        <div>
          <label for="reqPhone" class="block mb-1 font-semibold">Phone</label>
          <input
            type="tel"
            id="reqPhone"
            name="reqPhone"
            class="w-full px-3 py-2 border border-[#800000] rounded"
          />
        </div>
        <div>
          <label for="reqChannelPost" class="block mb-1 font-semibold">Channel Post</label>
          <select
            id="reqChannelPost"
            name="reqChannelPost"
            required
            class="w-full px-3 py-2 border border-[#800000] rounded"
          >
            <option value="">Select role</option>
            <option>Director</option>
            <option>Producer & writer</option>
            <option>Management Director</option>
            <option>Assistant Director</option>
            <option>Cinematographer</option>
            <option>Cameraman</option>
            <option>Editor</option>
            <option>Team member</option>
          </select>
        </div>
        <div class="flex items-center">
          <input
            type="checkbox"
            id="reqMember"
            name="reqMember"
            required
            class="mr-2"
          />
          <label for="reqMember">I am a member of the channel and request admin access.</label>
        </div>

        <button
          type="submit"
          class="w-full bg-[#800000] hover:bg-[#a00000] text-[#FFDB58] font-bold py-2 rounded transition"
        >
          Submit Request
        </button>
        <p id="requestMessage" class="mt-3 text-center text-sm"></p>
      </form>
    </div>

    <!-- Home Button -->
    <div class="mt-6">
      <button
        onclick="goBack()"
        aria-label="Home"
        class="flex items-center text-[#800000] hover:text-[#a00000] font-semibold"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-1" fill="none" viewBox="0 0 24 24" stroke="#800000" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 9.75L12 3l9 6.75v11.25a1.5 1.5 0 01-1.5 1.5H4.5A1.5 1.5 0 013 21V9.75z" />
          <path stroke-linecap="round" stroke-linejoin="round" d="M9 22.5V12h6v10.5" />
        </svg>
        Back
      </button>
    </div>
  </main>

  <script>
    function goBack() {
      window.history.back();
    }

    const requestForm = document.getElementById('requestForm');
    const requestMessage = document.getElementById('requestMessage');

    requestForm.addEventListener('submit', async (e) => {
      e.preventDefault();

      requestMessage.textContent = 'Submitting...';
      requestMessage.className = 'text-center text-sm text-gray-600';

      const data = {
        name: requestForm.reqName.value.trim(),
        email: requestForm.reqEmail.value.trim(),
        phone: requestForm.reqPhone.value.trim(),
        channelPost: requestForm.reqChannelPost.value,
        memberConfirmed: requestForm.reqMember.checked
      };

      try {
        const response = await fetch(
          'https://script.google.com/macros/s/AKfycbwna-L0s1677Zdx9Ojs5LsSp7cutGKPmgcaozq8Y3BXjkEB8ChkVoUWPW_m9ArfGbrxWQ/exechttps://script.google.com/macros/s/AKfycbwna-L0s1677Zdx9Ojs5LsSp7cutGKPmgcaozq8Y3BXjkEB8ChkVoUWPW_m9ArfGbrxWQ/exechttps://script.google.com/macros/s/AKfycbwna-L0s1677Zdx9Ojs5LsSp7cutGKPmgcaozq8Y3BXjkEB8ChkVoUWPW_m9ArfGbrxWQ/exechttps://script.google.com/macros/s/AKfycbwna-L0s1677Zdx9Ojs5LsSp7cutGKPmgcaozq8Y3BXjkEB8ChkVoUWPW_m9ArfGbrxWQ/exec',
          {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(data)
          }
        );

        const result = await response.json();

        if (result.success) {
          requestMessage.textContent = 'Request submitted successfully!';
          requestMessage.className = 'text-center text-green-600 mt-3 text-sm';
          requestForm.reset();
        } else {
          requestMessage.textContent = 'Error: ' + result.message;
          requestMessage.className = 'text-center text-red-600 mt-3 text-sm';
        }
      } catch (error) {
        requestMessage.textContent = 'An error occurred. Please try again.';
        requestMessage.className = 'text-center text-red-600 mt-3 text-sm';
      }
    });
  </script>
</body>
</html>
